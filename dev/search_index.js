var documenterSearchIndex = {"docs":
[{"location":"api/","page":"API","title":"API","text":"\nCurrentModule = SimilaritySearch\nDocTestSetup = quote\n    using SimilaritySearch\nend","category":"page"},{"location":"api/#Indexes","page":"API","title":"Indexes","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"ExhaustiveSearch\nParallelExhaustiveSearch\nSearchGraph","category":"page"},{"location":"api/#SimilaritySearch.ExhaustiveSearch","page":"API","title":"SimilaritySearch.ExhaustiveSearch","text":"ExhaustiveSearch(dist::SemiMetric, db::AbstractVector)\n\nSolves queries evaluating dist for the query and all elements in the dataset\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.ParallelExhaustiveSearch","page":"API","title":"SimilaritySearch.ParallelExhaustiveSearch","text":"ParallelExhaustiveSearch(; dist=SqL2Distance(), db=VectorDatabase{Float32}())\n\nSolves queries evaluating dist in parallel for the query and all elements in the dataset. Note that this should not be used in conjunction with searchbatch(...; parallel=true) since they will compete for resources.\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.SearchGraph","page":"API","title":"SimilaritySearch.SearchGraph","text":"struct SearchGraph <: AbstractSearchIndex\n\nSearchGraph index. It stores a set of points that can be compared through a distance function dist. The performance is determined by the search algorithm algo and the neighborhood policy. It supports callbacks to adjust parameters as insertions are made.\n\nhints: Initial points for exploration (empty hints imply using random points)\n\nNote: Parallel insertions should be made through append! or index! function with parallel_block > 1\n\n\n\n\n\n","category":"type"},{"location":"api/#Searching","page":"API","title":"Searching","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"search\nsearchbatch","category":"page"},{"location":"api/#SimilaritySearch.search","page":"API","title":"SimilaritySearch.search","text":"search(seq::ExhaustiveSearch, context::AbstractContext, q, res::KnnResult)\n\nSolves the query evaluating all items in the given query.\n\n\n\n\n\nsearch(ex::ParallelExhaustiveSearch, context::GenericContext, q, res::KnnResult)\n\nSolves the query evaluating all items in the given query.\n\nArguments\n\nex: the search structure\nq: the query to solve\nres: the result set\ncontext: running context\n\n\n\n\n\nsearch(bs::BeamSearch, index::SearchGraph, context, q, res, hints; bsize=bs.bsize, Δ=bs.Δ, maxvisits=bs.maxvisits)\n\nTries to reach the set of nearest neighbors specified in res for q.\n\nbs: the parameters of BeamSearch\nindex: the local search index\nq: the query\nres: The result object, it stores the results and also specifies the kind of query\nhints: Starting points for searching, randomly selected when it is an empty collection\ncontext: A SearchGraphContext object with preallocated objects\n\nOptional arguments (defaults to values in bs)\n\nbsize: Beam size\nΔ: exploration expansion factor\nmaxvisits: Maximum number of nodes to visit (distance evaluations)\n\n\n\n\n\nsearch(index::SearchGraph, context::SearchGraphContext, q, res; hints=index.hints\n\nSolves the specified query res for the query object q.\n\n\n\n\n\n","category":"function"},{"location":"api/#SimilaritySearch.searchbatch","page":"API","title":"SimilaritySearch.searchbatch","text":"searchbatch(index, ctx, Q, k::Integer) -> indices, distances\nsearchbatch(index, Q, k::Integer) -> indices, distances\n\nSearches a batch of queries in the given index (searches for k neighbors).\n\nArguments\n\nindex: The search structure\nQ: The set of queries\nk: The number of neighbors to retrieve\ncontext: caches, hyperparameters, and meta data (defaults to getcontext(index))\n\nNote: The i-th column in indices and distances correspond to the i-th query in Q Note: The final indices at each column can be 0 if the search process was unable to retrieve k neighbors.\n\n\n\n\n\nsearchbatch(index, ctx, Q, I::AbstractMatrix{Int32}, D::AbstractMatrix{Float32}) -> indices, distances\n\nSearches a batch of queries in the given index and I and D as output (searches for k=size(I, 1))\n\nArguments\n\nindex: The search structure\nQ: The set of queries\nk: The number of neighbors to retrieve\nctx: environment for running searches (hyperparameters and caches)\n\n\n\n\n\nsearchbatch(index, context, Q, KNN::AbstractVector{KnnResult}) -> indices, distances\n\nSearches a batch of queries in the given index using an array of KnnResult's; each KnnResult object can specify different k values.\n\nArguments\n\ncontext: contain caches to reduce memory allocations and hyperparameters for search customization\n\n\n\n\n\n","category":"function"},{"location":"api/","page":"API","title":"API","text":"Note: KnnResult based functions are significantly faster in general on pre-allocated objects that similar functions accepting matrices of identifiers and distances. Matrix based outputs are based on KnnResult methods that copy their results on the matrices. Preallocation is also costly, so if you have relatively small datasets, you are not intended to repeat the search process many times, or you are unsure, it is safe to use matrix-based functions.","category":"page"},{"location":"api/#Computing-all-knns","page":"API","title":"Computing all knns","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"The operation of computing all knns in the index is computed as follows:","category":"page"},{"location":"api/","page":"API","title":"API","text":"allknn","category":"page"},{"location":"api/#SimilaritySearch.allknn","page":"API","title":"SimilaritySearch.allknn","text":"allknn(g::AbstractSearchIndex, context, k::Integer; minbatch=0, pools=getpools(g)) -> knns, dists\nallknn(g, context, knns, dists; minbatch=0, pools=getpools(g)) -> knns, dists\n\nComputes all the k nearest neighbors (all vs all) using the index g. It removes self references.\n\nParameters:\n\ng: the index\ncontext: the index's context (caches, hyperparameters, logger, etc)\nQuery specification and result:\nk: the number of neighbors to retrieve\nknns: an uninitialized integer matrix of (k, n) size for storing the k nearest neighbors of the n elements\ndists: an uninitialized floating point matrix of (k, n) size for storing the k nearest distances of the n elements\ncontext: caches, hyperparameters and meta specifications, e.g., see SearchGraphContext\n\nReturns:\n\nknns a (k, n) matrix of identifiers; the i-th column corresponds to the i-th object in the dataset.   Zeros can happen to the end of each column meaning that the retrieval was less than the desired k\ndists a (k, n) matrix of distances; the i-th column corresponds to the i-th object in the dataset.   Zero values in knns should be ignored in dists\n\nNote:\n\nThis function was introduced in v0.8 series, and removes self references automatically. In v0.9 the self reference is kept since removing from the algorithm introduces a considerable overhead.    \n\n\n\n\n\n","category":"function"},{"location":"api/#Computing-closest-pair","page":"API","title":"Computing closest pair","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"The operation of finding the closest pair of elements in the indexed dataset.","category":"page"},{"location":"api/","page":"API","title":"API","text":"closestpair","category":"page"},{"location":"api/#SimilaritySearch.closestpair","page":"API","title":"SimilaritySearch.closestpair","text":"closestpair(idx::AbstractSearchIndex, ctx::AbstractContext; minbatch=0)\n\nFinds the closest pair among all elements in idx. If the index idx is approximate then pair of points could be also an approximation.\n\nArguments:\n\nidx: the search structure that indexes the set of points\nctx: the search context (caches, hyperparameters, etc)\n\nKeyword Arguments:\n\nminbatch: controls how multithreading is used for evaluating configurations, see getminbatch\n\n\n\n\n\n","category":"function"},{"location":"api/#Remove-near-duplicates","page":"API","title":"Remove near duplicates","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"Finds and removes near duplicate items in a metric dataset","category":"page"},{"location":"api/","page":"API","title":"API","text":"neardup","category":"page"},{"location":"api/#SimilaritySearch.neardup","page":"API","title":"SimilaritySearch.neardup","text":"neardup(idx::AbstractSearchIndex, ctx::AbstractContext, X::AbstractDatabase, ϵ::Real; k::Int=8, blocksize::Int=get_parallel_block(), minbatch=0, filterblocks=true, verbose=true)\nneardup(dist::SemiMetric, X::AbstractDatabase, ϵ::Real; kwargs...)\n\nFind nearest duplicates in database X using the empty index idx. The algorithm iteratively try to index elements in X, and items being near than ϵ to some element in idx will be ignored.\n\nThe function returns a named tuple (idx, map, nn, dist) where:\n\nidx: it is the index of the non duplicated elements\nctx: the index's context\nmap: a mapping from |idx|-1 to its positions in X\nnn: an array where each element in x in X points to its covering element (previously indexed element u such that d(u x_i) leq ϵ)\ndist: an array of distance values to each covering element (correspond to each element in nn)\n\nArguments\n\nidx: An empty index (i.e., a SearchGraph)\nX: The input dataset\nϵ: Real value to cut, if negative, then ϵ will be computed using the quantile value at 'abs(ϵ)' in a small sample of nearest neighbor distances; the quantile method should be used only for applications that need some vague approximations to ϵ\n\nKeyword arguments\n\nk: The number of nearest neighbors to retrieve (some algorithms benefit from retrieving larger k values)\nblocksize: the number of items processed at the time\nminbatch: argument to control @batch macro (see Polyester package multithreading)\nfilterblocks: if true then it filters neardups inside blocks (see blocksize parameter), otherwise, it supposes that blocks are free of neardups (e.g., randomized order).\nverbose: controls the verbosity of the function\n\nNotes\n\nThe index idx must support incremental construction\nIf you need to customize object insertions, you must wrap the index idx and implement your custom methods; it requires valid implementations of the following functions:\nsearchbatch(idx::AbstractSearchIndex, ctx, queries::AbstractDatabase, knns::Matrix, dists::Matrix)\ndistance(idx::AbstractSearchIndex)\nlength(idx::AbstractSearchIndex)\nappend_items!(idx::AbstractSearchIndex, ctx, items::AbstractDatabase)\nYou can access the set of elements being 'ϵ-non duplicates (the ϵ-net) using database(idx) or where nn[i] == i\n\n\n\n\n\n","category":"function"},{"location":"api/#Indexing-elements","page":"API","title":"Indexing elements","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"push_item!\nappend_items!\nindex!\nrebuild","category":"page"},{"location":"api/#SimilaritySearch.push_item!","page":"API","title":"SimilaritySearch.push_item!","text":"push_item!(res::KnnResult, p::IdWeight)\npush_item!(res::KnnResult, id::Integer, dist::Real)\n\nAppends an item into the result set\n\n\n\n\n\npush_item!(\n    index::SearchGraph,\n    context,\n    item;\n    push_item=true\n)\n\nAppends an object into the index.\n\nArguments:\n\nindex: The search graph index where the insertion is going to happen\nitem: The object to be inserted, it should be in the same space than other objects in the index and understood by the distance metric.\ncontext: The context environment of the graph, see  SearchGraphContext.\npush_db: if push_db=false is an internal option, used by append! and index! (it avoids to insert item into the database since it is already inserted but not indexed)\n\n\n\n\n\npush_item!(\n    index::SearchGraph,\n    context,\n    item,\n    push_item\n)\n\nAppends an object into the index. Internal function\n\nArguments:\n\nindex: The search graph index where the insertion is going to happen.\nitem: The object to be inserted, it should be in the same space than other objects in the index and understood by the distance metric.\ncontext: The context environment of the graph, see  SearchGraphContext.\npush_db: if false is an internal option, used by append! and index! (it avoids to insert item into the database since it is already inserted but not indexed).\nNote: setting callbacks as nothing ignores the execution of any callback\n\n\n\n\n\n","category":"function"},{"location":"api/#SimilaritySearch.append_items!","page":"API","title":"SimilaritySearch.append_items!","text":"append_items!(\n    index::SearchGraph,\n    context::SearchGraphContext,\n    db\n)\n\nAppends all items in db to the index. It can be made in parallel or sequentially.\n\nArguments:\n\nindex: the search graph index\ndb: the collection of objects to insert, an AbstractDatabase is the canonical input, but supports any iterable objects\ncontext: The context environment of the graph, see  SearchGraphContext.\n\n\n\n\n\n","category":"function"},{"location":"api/#SimilaritySearch.index!","page":"API","title":"SimilaritySearch.index!","text":"index!(index::SearchGraph, context::SearchGraphContext)\n\nIndexes the already initialized database (e.g., given in the constructor method). It can be made in parallel or sequentially. The arguments are the same than append_items! function but using the internal index.db as input.\n\nArguments:\n\nindex: The graph index\ncontext: The context environment of the graph, see  SearchGraphContext.\n\n\n\n\n\n","category":"function"},{"location":"api/#SimilaritySearch.rebuild","page":"API","title":"SimilaritySearch.rebuild","text":"rebuild(g::SearchGraph; context=SearchGraphContext())\n\nRebuilds the SearchGraph index but seeing the whole dataset for the incremental construction, i.e., it can connect the i-th vertex to its knn in the 1..n possible vertices instead of its knn among 1..(i-1) as in the original algorithm.\n\nArguments\n\ng: The search index to be rebuild.\ncontext: The context to run the procedure, it can differ from the original one.\nminbatch: controls how the multithreading is made, see getminbatch\n\n\n\n\n\n","category":"function"},{"location":"api/#Distance-functions","page":"API","title":"Distance functions","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"The distance functions are defined to work under the evaluate(::metric, u, v) function (borrowed from Distances.jl package).","category":"page"},{"location":"api/#Minkowski-vector-distance-functions","page":"API","title":"Minkowski vector distance functions","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"L1Distance\nL2Distance\nSqL2Distance\nLInftyDistance\nLpDistance","category":"page"},{"location":"api/#SimilaritySearch.L1Distance","page":"API","title":"SimilaritySearch.L1Distance","text":"L1Distance()\n\nThe manhattan distance or L_1 is defined as\n\nL_1(u v) = sum_iu_i - v_i\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.L2Distance","page":"API","title":"SimilaritySearch.L2Distance","text":"L2Distance()\n\nThe euclidean distance or L_2 is defined as\n\nL_2(u v) = sqrtsum_i(u_i - v_i)^2\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.SqL2Distance","page":"API","title":"SimilaritySearch.SqL2Distance","text":"SqL2Distance()\n\nThe squared euclidean distance is defined as\n\nL_2(u v) = sum_i(u_i - v_i)^2\n\nIt avoids the computation of the square root and should be used whenever you are able do it.\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.LInftyDistance","page":"API","title":"SimilaritySearch.LInftyDistance","text":"LInftyDistance()\n\nThe Chebyshev or L_infty distance is defined as\n\nL_infty(u v) = max_ileft u_i - v_i right\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.LpDistance","page":"API","title":"SimilaritySearch.LpDistance","text":"LpDistance(p)\nLpDistance(p, pinv)\n\nThe general Minkowski distance L_p distance is defined as\n\nL_p(u v) = leftsum_i(u_i - v_i)^pright^1p\n\nWhere p_inv = 1p. Note that you can specify unrelated p and pinv if you need an specific behaviour.\n\n\n\n\n\n","category":"type"},{"location":"api/","page":"API","title":"API","text":"The package implements some of these functions using the @turbo macro from LoopVectorization package, only for v1.10 and previous versions.","category":"page"},{"location":"api/#Cosine-and-angle-distance-functions-for-vectors","page":"API","title":"Cosine and angle distance functions for vectors","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"CosineDistance\nNormalizedCosineDistance\nAngleDistance\nNormalizedAngleDistance","category":"page"},{"location":"api/#SimilaritySearch.CosineDistance","page":"API","title":"SimilaritySearch.CosineDistance","text":"CosineDistance()\n\nThe cosine is defined as:\n\ncos(u v) = fracsum_i u_i v_isqrtsum_i u_i^2 sqrtsum_i v_i^2\n\nThe cosine distance is defined as 1 - cos(uv)\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.NormalizedCosineDistance","page":"API","title":"SimilaritySearch.NormalizedCosineDistance","text":"NormalizedCosineDistance()\n\nSimilar to CosineDistance but suppose that input vectors are already normalized, and therefore, reduced to simply one minus the dot product.\n\n1 - sum_i u_i v_i\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.AngleDistance","page":"API","title":"SimilaritySearch.AngleDistance","text":"AngleDistance()\n\nThe angle distance is defined as:\n\n(u v)= arccos(cos(u v))\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.NormalizedAngleDistance","page":"API","title":"SimilaritySearch.NormalizedAngleDistance","text":"NormalizedAngleDistance()\n\nSimilar to AngleDistance but suppose that input vectors are already normalized\n\narccos sum_i u_i v_i\n\n\n\n\n\n","category":"type"},{"location":"api/#Set-distance-functions","page":"API","title":"Set distance functions","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"Set bbject are represented as ordered arrays","category":"page"},{"location":"api/","page":"API","title":"API","text":"JaccardDistance\nDiceDistance\nIntersectionDissimilarity\nCosineDistanceSet","category":"page"},{"location":"api/#SimilaritySearch.JaccardDistance","page":"API","title":"SimilaritySearch.JaccardDistance","text":"JaccardDistance()\n\nThe Jaccard distance is defined as\n\nJ(u v) = fracu cap vu cup v\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.DiceDistance","page":"API","title":"SimilaritySearch.DiceDistance","text":"DiceDistance()\n\nThe Dice distance is defined as\n\nD(u v) = frac2 u cap vu + v\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.IntersectionDissimilarity","page":"API","title":"SimilaritySearch.IntersectionDissimilarity","text":"IntersectionDissimilarity()\n\nThe intersection dissimilarity uses the size of the intersection as a mesuare of similarity as follows:\n\nI(u v) = 1 - fracu cap vmax u v\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.CosineDistanceSet","page":"API","title":"SimilaritySearch.CosineDistanceSet","text":"CosineDistanceSet()\n\nThe cosine distance for very sparse binary vectors represented as sorted lists of positive integers where ones occur.\n\n\n\n\n\n","category":"type"},{"location":"api/#String-alignment-distances","page":"API","title":"String alignment distances","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"The following uses strings/arrays as input, i.e., objects follow the array interface. A broader set of distances for strings can be found in the StringDistances.jl package.","category":"page"},{"location":"api/","page":"API","title":"API","text":"CommonPrefixDissimilarity\nGenericLevenshteinDistance\nStringHammingDistance\nLevenshteinDistance\nLcsDistance","category":"page"},{"location":"api/#SimilaritySearch.CommonPrefixDissimilarity","page":"API","title":"SimilaritySearch.CommonPrefixDissimilarity","text":"CommonPrefixDissimilarity()\n\nUses the common prefix as a measure of dissimilarity between two strings\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.GenericLevenshteinDistance","page":"API","title":"SimilaritySearch.GenericLevenshteinDistance","text":"GenericLevenshteinDistance(;icost, dcost, rcost)\n\nThe levenshtein distance measures the minimum number of edit operations to convert one string into another. The costs insertion icost, deletion cost dcost, and replace cost rcost. Not thread safe, use a copy of for each thread.\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.StringHammingDistance","page":"API","title":"SimilaritySearch.StringHammingDistance","text":"StringHammingDistance()\n\nThe hamming distance counts the differences between two equally sized strings\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.LevenshteinDistance","page":"API","title":"SimilaritySearch.LevenshteinDistance","text":"LevenshteinDistance()\n\nInstantiates a GenericLevenshteinDistance object to perform traditional levenshtein distance\n\n\n\n\n\n","category":"function"},{"location":"api/#SimilaritySearch.LcsDistance","page":"API","title":"SimilaritySearch.LcsDistance","text":"LcsDistance()\n\nInstantiates a GenericLevenshteinDistance object to perform LCS distance\n\n\n\n\n\n","category":"function"},{"location":"api/#Distances-for-Cloud-of-points","page":"API","title":"Distances for Cloud of points","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"HausdorffDistance\nMinHausdorffDistance","category":"page"},{"location":"api/#SimilaritySearch.HausdorffDistance","page":"API","title":"SimilaritySearch.HausdorffDistance","text":"HausdorffDistance(dist::SemiMetric)\n\nHausdorff distance is defined as the maximum of the minimum between two clouds of points.\n\nHausdorff(U V) = maxmax_u in U nndist(u V) maxv in V nndist(v U) \n\nwhere nndist(u V) computes the distance of u to its nearest neighbor in V using the dist metric.\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.MinHausdorffDistance","page":"API","title":"SimilaritySearch.MinHausdorffDistance","text":"MinHausdorffDistance(dist::SemiMetric)\n\nSimilar to HausdorffDistance but using minimum instead of maximum.\n\n\n\n\n\n","category":"type"},{"location":"api/#Functions-that-customize-parameters","page":"API","title":"Functions that customize parameters","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"Several algorithms support arguments that modify the performance, for instance, some of them should be computed or prepared with external functions or structs","category":"page"},{"location":"api/","page":"API","title":"API","text":"getminbatch\ngetknnresult\ngetpools\nNeighborhood\nCallback\nSearchGraphCallbacks\nBeamSearchSpace","category":"page"},{"location":"api/#SimilaritySearch.getminbatch","page":"API","title":"SimilaritySearch.getminbatch","text":"getminbatch(minbatch, n)\n\nUsed by functions that use parallelism based on Polyester.jl minibatches specify how many queries (or something else) are solved per thread whenever the thread is used (in minibatches). \n\nArguments\n\nminbatch\nIntegers 1  minbatch  n are valid values (where n is the number of objects to process, i.e., queries)\nDefaults to 0 which computes a default number based on the number of available cores and n.\nSet minbatch=-1 to avoid parallelism.\n\n\n\n\n\n","category":"function"},{"location":"api/#SimilaritySearch.getknnresult","page":"API","title":"SimilaritySearch.getknnresult","text":"getknnresult(k::Integer, ctx::AbstractContext) -> KnnResult\n\nGeneric function to obtain a shared result set for the same thread and avoid memory allocations. This function should be specialized for indexes and caches that use shared results or threads in some special way.\n\n\n\n\n\n","category":"function"},{"location":"api/#SimilaritySearch.Neighborhood","page":"API","title":"SimilaritySearch.Neighborhood","text":"Neighborhood(; logbase=2, minsize=2, filter=SatNeighborhood())\n\nDetermines the size of the neighborhood, k is adjusted as a callback, and it is intended to affect previously inserted vertices. The neighborhood is designed to consider two components k=in+out, i.e. incoming and outgoing edges for each vertex.\n\nThe out size is computed as minsize + log(logbase n) where n is the current number of indexed elements; this is computed searching\n\nfor out  elements in the current index.\n\nThe in size is unbounded.\nfilter is intended to postprocess neighbors (after search process, i.e., once out edges are computed); do not change k but always must return a copy of the filterd result set.\n\nNote: Set logbase=Inf to obtain a fixed number of in nodes; and set minsize=0 to obtain a pure logarithmic growing neighborhood.\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.Callback","page":"API","title":"SimilaritySearch.Callback","text":"abstract type Callback end\n\nAbstract type to trigger callbacks after some number of insertions. SearchGraph stores the callbacks in callbacks (a dictionary that associates symbols and callback objects); A SearchGraph object controls when callbacks are fired using callback_logbase and callback_starting\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.BeamSearchSpace","page":"API","title":"SimilaritySearch.BeamSearchSpace","text":"BeamSearchSpace(; bsize, Δ, bsize_scale, Δ_scale)\n\nDefine search space for beam search autotuning\n\n\n\n\n\n","category":"type"},{"location":"api/#Database-API","page":"API","title":"Database API","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"AbstractDatabase\nMatrixDatabase\nVectorDatabase\nDynamicMatrixDatabase\nStrideMatrixDatabase","category":"page"},{"location":"api/#SimilaritySearch.AbstractDatabase","page":"API","title":"SimilaritySearch.AbstractDatabase","text":"abstract type AbstractDatabase end\n\nBase type to represent databases. A database is a collection of objects that can be accessed like a similar interface to AbstractVector. It is separated to allow SimilaritySearch methods to know what is a database and what is an object (since most object representations will look as vectors and matrices). \n\nThe basic implementations are:\n\nMatrixDatabase: A wrapper for object-vectors stored in a Matrix, columns are the objects. It is static.\nDynamicMatrixDatabase: A dynamic representation for vectors that allows adding new vectors.\nVectorDatabase: A wrapper for vector-like structures. It can contain any kind of objects.\nSubDatabase: A sample of a given database\n\nIn particular, the storage details are not used by VectorDatabase and MatrixDatabase. For instance, it is possible to use matrices like Matrix, SMatrix or StrideArrays; or even use generated objects with VectorDatabase (supporting a vector-like interface).\n\nIf the storage backend support it, it is possible to use vector operations, for example:\n\nget the i-th element obj = db[i], elements in the database are identified by position\nget the elements list in a list of indices lst as db[lst] (also using view)\nset a value at the i-th element db[i] = obj\nrandom sampling rand(db), rand(db, 3)\niterate and collect objects in the database\nget the number of elements in the database length(db)\nadd new objects to the end of the database (not all internal containers will support it)\npush_item!(db, u) adds a single element u\nappend_items!(db, lst) adds a list of objects to the end of the database\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.MatrixDatabase","page":"API","title":"SimilaritySearch.MatrixDatabase","text":"struct MatrixDatabase{M<:AbstractDatabase} <: AbstractDatabase\n\nMatrixDatabase(matrix::AbstractMatrix)\n\nWraps a matrix-like object matrix into a MatrixDatabase. Please see AbstractDatabase for general usage.\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.VectorDatabase","page":"API","title":"SimilaritySearch.VectorDatabase","text":"struct VectorDatabase{V} <: AbstractDatabase\n\nA wrapper for vector-like databases\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.DynamicMatrixDatabase","page":"API","title":"SimilaritySearch.DynamicMatrixDatabase","text":"struct DynamicMatrixDatabase{DType,Dim} <: AbstractDatabase\n\nA dynamic matrix with elements of type DType and dimension Dim \n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.StrideMatrixDatabase","page":"API","title":"SimilaritySearch.StrideMatrixDatabase","text":"struct StrideMatrixDatabase{M<:StrideArray} <: AbstractDatabase\n\nStrideMatrixDatabase(matrix::StrideArray)\n\nWraps a matrix object into a StrideArray and wrap it as a database. Please see AbstractDatabase for general usage.\n\n\n\n\n\n","category":"type"},{"location":"api/","page":"API","title":"API","text":"\nfind_neighborhood\nSatPruning\nRandomPruning\nKeepNearestPruning\nNeighborhoodPruning\nmaxlength\nget_parallel_block\nSimilarityFromDistance\nexecute_callbacks\n","category":"page"},{"location":"api/#SimilaritySearch.find_neighborhood","page":"API","title":"SimilaritySearch.find_neighborhood","text":"find_neighborhood(copy_, index::SearchGraph{T}, context, item; hints=index.hints)\n\nSearches for item neighborhood in the index, i.e., if item were in the index whose items should be its neighbors (intenal function). The copy_ function forces to control how the returned KnnResult object is handled because it uses a cache result set from the given context. \n\nArguments\n\ncopy_: A copying function, it controls what is retrieved by the function.\nindex: The search index.\nitem: The item to be inserted.\ncontext: context, neighborhood, and cache objects to be used\nhints: Search hints\n\n\n\n\n\n","category":"function"},{"location":"api/#SimilaritySearch.maxlength","page":"API","title":"SimilaritySearch.maxlength","text":"maxlength(res::KnnResult)\n\nThe maximum allowed cardinality (the k of knn)\n\n\n\n\n\n","category":"function"},{"location":"api/#SimilaritySearch.get_parallel_block","page":"API","title":"SimilaritySearch.get_parallel_block","text":"get_parallel_block()\n\nUsed by SearchGraph insertion functions to solve find_neighborhood in blocks. Small blocks are better to ensure quality; faster constructions will be achieved if parallel_block is a multiply of Threads.nthreads()\n\n\n\n\n\n","category":"function"},{"location":"api/#SimilaritySearch.SimilarityFromDistance","page":"API","title":"SimilaritySearch.SimilarityFromDistance","text":"SimilarityFromDistance(dist)\n\nEvaluates as 1(1 + d) for a distance evaluation d of dist. This is not a distance function and is part of the hacks to get a similarity  for searching farthest elements on indexes that can handle this hack (e.g., ExhaustiveSearch, ParallelExhaustiveSearch, SearchGraph).\n\n\n\n\n\n","category":"type"},{"location":"api/#SimilaritySearch.execute_callbacks","page":"API","title":"SimilaritySearch.execute_callbacks","text":"execute_callbacks(index, context, n=length(index), m=n+1)\n\nProcess all registered callbacks\n\n\n\n\n\n","category":"function"},{"location":"","page":"Home","title":"Home","text":"CurrentModule = SimilaritySearch","category":"page"},{"location":"#SimilaritySearch.jl","page":"Home","title":"SimilaritySearch.jl","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"SimilaritySearch.jl is a library for nearest neighbor search. In particular, it contains the implementation for SearchGraph, a fast and flexible search index.","category":"page"},{"location":"","page":"Home","title":"Home","text":"The following manuscript describes and benchmarks version 0.6:","category":"page"},{"location":"","page":"Home","title":"Home","text":"@article{tellezscalable,\n  title={A scalable solution to the nearest neighbor search problem through local-search methods on neighbor graphs},\n  author={Tellez, Eric S and Ruiz, Guillermo and Chavez, Edgar and Graff, Mario},\n  journal={Pattern Analysis and Applications},\n  pages={1--15},\n  publisher={Springer}\n}\n","category":"page"},{"location":"","page":"Home","title":"Home","text":"The current algorithm (version 0.8) is described and benchmarked in the following manuscript:","category":"page"},{"location":"","page":"Home","title":"Home","text":"\n@misc{tellez2022similarity,\n      title={Similarity search on neighbor's graphs with automatic Pareto optimal performance and minimum expected quality setups based on hyperparameter optimization}, \n      author={Eric S. Tellez and Guillermo Ruiz},\n      year={2022},\n      eprint={2201.07917},\n      archivePrefix={arXiv},\n      primaryClass={cs.IR}\n}","category":"page"},{"location":"#Installing-SimilaritySearch","page":"Home","title":"Installing SimilaritySearch","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"You may install the package as follows","category":"page"},{"location":"","page":"Home","title":"Home","text":"] add SimilaritySearch.jl","category":"page"},{"location":"","page":"Home","title":"Home","text":"also, you can run the set of tests as follows","category":"page"},{"location":"","page":"Home","title":"Home","text":"] test SimilaritySearch","category":"page"},{"location":"#Using-the-library","page":"Home","title":"Using the library","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"You can find a brief tutorial and examples in https://github.com/sadit/SimilaritySearchDemos. You will find a list of Jupyter and Pluto notebooks, and some scripts that exemplifies its usage.","category":"page"}]
}
